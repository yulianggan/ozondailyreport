# 按自然月模式实现计划（方案1：单一接口扩展）

需求：mode=month，给定选择日期与展示月数M，第M列为包含选择日的自然月，向前 M-1 月。每列为当月汇总，均价=销售额/销量。

步骤：
1) utils
   - build_months(end, n): [(start, end, 'YYYY-MM')] oldest->latest。
2) /api/report 扩展
   - 参数：mode in {day,week,month}、months。
   - month 分支：查询最早月初~最后月末；按商品+月索引聚合；period_labels = "YYYY-MM（start ~ end）"；左侧汇总=近N月汇总。
3) /api/debug-report 扩展
   - 支持 months，返回首尾区间与匹配计数。
4) 前端
   - 工具栏：模式下拉新增“月”，输入“展示月数”。
   - 请求：传 months；表头“第i月 + period_labels[i]”；导出宽表/明细支持月模式。
5) 验证
   - debug-report?mode=month&months=12&date=… => total_match>0。

